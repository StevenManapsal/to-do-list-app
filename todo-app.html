<!DOCTYPE html>
<!--
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘           TASKLY â€” To-Do & Task Management App               â•‘
  â•‘           Built with pure HTML, CSS & JavaScript             â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  FILE STRUCTURE:
  â”œâ”€â”€ <head>       â†’ Page settings, fonts, and ALL the CSS styling
  â””â”€â”€ <body>       â†’ All visible content (HTML)
      â””â”€â”€ <script> â†’ All interactive behavior (JavaScript)
-->

<!--
  DOCTYPE & <html>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ <!DOCTYPE html> tells the browser: "This is a modern HTML5 page."
  â€¢ lang="en" tells search engines & screen readers the page is English.
-->
<html lang="en">
<head>
  <!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    META TAGS â€” Page Configuration
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Meta tags give the browser invisible instructions about the page.
  -->
  <meta charset="UTF-8" />
  <!--
    viewport: Makes the page scale correctly on phones/tablets.
    width=device-width  â†’ Match the device's screen width
    initial-scale=1.0   â†’ Don't zoom in/out on load
  -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Taskly â€” Task Manager</title>

  <!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    GOOGLE FONTS â€” Custom Typography
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    We fetch the "Outfit" font from Google's servers.
    "preconnect" starts the connection early for faster loading.
    font-weight numbers: 300=Light, 400=Regular, 600=SemiBold, 800=ExtraBold
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

  <!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CSS STYLES â€” Everything between <style> tags
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CSS controls: colors, fonts, sizes, spacing, layout, animations.
    HTML builds the skeleton; CSS paints and arranges it.
  -->
  <style>

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       CSS CUSTOM PROPERTIES (Variables)
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       Variables let you define a value ONCE and use it everywhere.
       Create:  --name: value;
       Use:     property: var(--name);

       :root targets the root <html> element, making variables
       globally available to the entire page.
    */
    :root {
      --bg:           #0d0a07;   /* Darkest background â€” warm near-black */
      --surface:      #161008;   /* Card/panel surface â€” slightly lighter */
      --surface2:     #1e160a;   /* Second surface level â€” nested elements */
      --surface3:     #2a1e0e;   /* Third level â€” hover states */
      --border:       #302015;   /* Subtle divider lines */
      --orange:       #f06a00;   /* Primary accent â€” bold orange */
      --orange-glow:  rgba(240,106,0,0.18); /* Transparent orange for glow effects */
      --text:         #f0ebe5;   /* Primary text â€” warm white */
      --text-muted:   #7a6a58;   /* Secondary text â€” muted brown-gray */
      --text-dim:     #3d3020;   /* Very dim â€” placeholders, timestamps */
      --green:        #4ecba3;   /* Accent green â€” "done" tasks */
      --amber:        #ffb547;   /* Amber â€” "in progress" */
      --purple:       #b085ff;   /* Purple â€” "waiting" category */
      --radius-sm:    10px;
      --radius-md:    16px;
      --radius-lg:    22px;
      --radius-xl:    999px;     /* Fully rounded â€” pill shape */
      --font:         'Outfit', sans-serif;
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       CSS RESET
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       Browsers add default margins/padding to elements.
       We reset them so our design starts from zero.
       * means "apply to every single element on the page".
       ::before and ::after are virtual elements CSS can create.
    */
    *, *::before, *::after {
      box-sizing: border-box; /* width includes padding+border (much easier math!) */
      margin: 0;
      padding: 0;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: var(--font);
      font-size: 15px;
      line-height: 1.5;
      min-height: 100vh;     /* At least full viewport height */
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      /*
        radial-gradient: A circular gradient that fades outward.
        Creates a warm amber glow at the top-center of the page.
        ellipse = oval shape, 80% wide 50% tall, positioned at top-center.
      */
      background-image: radial-gradient(ellipse 80% 40% at 50% 0%, #301800, transparent 65%);
    }

    /* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       PHONE SHELL â€” Fake mobile phone frame
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
    .phone-shell {
      width: 390px;          /* iPhone 14 Pro width */
      height: 844px;         /* iPhone 14 Pro height */
      max-height: 95vh;
      background: var(--surface);
      border-radius: 50px;   /* Very rounded = phone look */
      position: relative;    /* Lets child elements use position:absolute */
      overflow: hidden;      /* Clips children to the phone shape */
      box-shadow:
        0 0 0 2px #3d2a15,
        0 0 0 4px #180f00,
        0 50px 100px rgba(0,0,0,0.85),
        0 0 150px rgba(240,106,0,0.07);
    }

    /* Top "Dynamic Island" notch */
    .notch {
      position: absolute; /* Relative to .phone-shell */
      top: 14px;
      left: 50%;
      transform: translateX(-50%); /* Center trick: move left by 50% of own width */
      width: 120px;
      height: 34px;
      background: #000;
      border-radius: 20px;
      z-index: 100; /* Always on top of everything else */
    }

    /* Scrollable content area inside the phone */
    .screen {
      width: 100%;
      height: 100%;
      overflow-y: auto;   /* Enable vertical scrolling */
      overflow-x: hidden;
      padding-top: 62px;
      padding-bottom: 88px;
      scrollbar-width: none; /* Hide scrollbar in Firefox */
    }
    .screen::-webkit-scrollbar { display: none; } /* Hide scrollbar in Chrome/Safari */

    /* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       BOTTOM NAVIGATION BAR
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
    .bottom-nav {
      position: absolute; /* Sticks to the bottom of .phone-shell */
      bottom: 0;
      left: 0;
      right: 0;
      height: 84px;
      background: linear-gradient(to top, var(--surface) 75%, transparent);
      display: flex;
      align-items: center;
      justify-content: space-around;
      padding: 0 24px 16px;
      z-index: 50;
    }

    .nav-btn {
      display: flex;
      flex-direction: column; /* Stack icon above label */
      align-items: center;
      gap: 3px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px 14px;
      border-radius: var(--radius-md);
      color: var(--text-muted);
      /* transition: smooth animation when properties change */
      transition: color 0.2s ease;
    }
    .nav-btn.active { color: var(--orange); }
    .nav-btn svg { width: 22px; height: 22px; }
    .nav-btn span { font-size: 11px; font-weight: 500; font-family: var(--font); }

    /* Small indicator dot below active icon */
    .nav-dot {
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--orange);
      opacity: 0;
      transition: opacity 0.2s;
    }
    .nav-btn.active .nav-dot { opacity: 1; }

    /* Floating Action Button â€” the big + circle */
    .fab {
      width: 58px;
      height: 58px;
      border-radius: 50%;
      background: var(--orange);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 6px;
      transition: all 0.2s ease;
      /* box-shadow creates a glowing effect around the button */
      box-shadow: 0 4px 20px rgba(240,106,0,0.45);
    }
    .fab:hover { transform: scale(1.08); box-shadow: 0 6px 28px rgba(240,106,0,0.65); }
    .fab svg { width: 24px; height: 24px; }

    /* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       VIEWS â€” Home & Calendar "pages"
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
    .view {
      display: none; /* Hidden by default */
      padding: 0 20px;
      /* animation: fadeSlideIn â€” defined in @keyframes below */
      animation: fadeSlideIn 0.3s ease forwards;
    }
    .view.active { display: block; } /* Only the active view is shown */

    /* Keyframe animation: slide up + fade in at the same time */
    @keyframes fadeSlideIn {
      from { opacity: 0; transform: translateY(14px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       HOME VIEW
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
    .home-header {
      display: flex;
      justify-content: space-between; /* Push items to opposite ends */
      align-items: flex-start;
      margin-bottom: 26px;
      padding-top: 6px;
    }

    /* Three vertical dots "menu" button */
    .menu-dots { display: flex; flex-direction: column; gap: 4px; padding: 6px; cursor: pointer; }
    .menu-dots span { width: 4px; height: 4px; border-radius: 50%; background: var(--text-muted); display: block; }

    .greeting-sub  { font-size: 21px; font-weight: 300; color: var(--text-muted); letter-spacing: -0.3px; }
    .greeting-name { font-size: 32px; font-weight: 800; color: var(--text); letter-spacing: -1.2px; line-height: 1; }
    .greeting-sub2 { font-size: 13px; color: var(--text-muted); margin-top: 5px; }

    /* Profile avatar circle */
    .avatar {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      background: linear-gradient(135deg, #f06a00, #a03a00);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0; /* Don't let flexbox shrink this element */
      box-shadow: 0 0 0 3px var(--border);
      overflow: hidden;
    }

    /* â”€â”€â”€ Highlighted "active" task card â”€â”€â”€ */
    .active-task-card {
      background: linear-gradient(140deg, #281800 0%, #1a0f00 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px;
      margin-bottom: 22px;
      position: relative;
      overflow: hidden;
      animation: fadeSlideIn 0.3s ease 0.1s both;
      /* "both" fills forward (keeps end state) and also uses start state before it begins */
    }

    /* Decorative background glow using ::before pseudo-element.
       pseudo-elements create virtual elements inside CSS â€” no HTML needed.
       content: "" is required (can be empty). */
    .active-task-card::before {
      content: '';
      position: absolute;
      top: -30px; right: -30px;
      width: 140px; height: 140px;
      background: radial-gradient(circle, rgba(240,106,0,0.22), transparent 70%);
      pointer-events: none; /* Clicks pass right through this decoration */
    }

    .task-category-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--orange-glow);
      border: 1px solid rgba(240,106,0,0.22);
      color: var(--orange);
      font-size: 11px;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: var(--radius-xl); /* Pill shape */
      margin-bottom: 12px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    .task-title-large {
      font-size: 19px;
      font-weight: 700;
      line-height: 1.3;
      margin-bottom: 18px;
      letter-spacing: -0.3px;
    }

    .task-footer { display: flex; justify-content: space-between; align-items: center; }

    .now-badge {
      background: var(--orange);
      color: white;
      font-size: 12px;
      font-weight: 700;
      padding: 6px 14px;
      border-radius: var(--radius-xl);
      letter-spacing: 0.4px;
      flex-shrink: 0;
    }

    .task-progress { flex: 1; margin-right: 16px; }
    .progress-label { font-size: 11px; color: var(--text-muted); margin-bottom: 6px; }
    .progress-track { height: 4px; background: var(--border); border-radius: 2px; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--orange); border-radius: 2px; transition: width 1s ease; }

    /* â”€â”€â”€ Section headers â”€â”€â”€ */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 13px;
      margin-top: 22px;
    }
    .section-title { font-size: 17px; font-weight: 700; letter-spacing: -0.3px; }
    .section-link  { font-size: 12px; color: var(--orange); cursor: pointer; font-weight: 500; }

    /* Small icon button (e.g., calendar icon next to section header) */
    .icon-btn {
      width: 32px; height: 32px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: background 0.2s;
    }
    .icon-btn:hover { background: var(--surface3); }
    .icon-btn svg { width: 15px; height: 15px; color: var(--text-muted); }

    /* â”€â”€â”€ 2Ã—2 Stats Grid â”€â”€â”€ */
    .stats-grid {
      /*
        CSS Grid: creates a 2-column layout.
        repeat(2, 1fr) = two equal columns, each 1 "fraction" of available width.
        gap = space between grid cells.
      */
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 24px;
      animation: fadeSlideIn 0.3s ease 0.15s both;
    }

    .stat-card {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px 16px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.22s ease;
    }
    .stat-card:hover { background: var(--surface3); transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.35); }

    .stat-bar {
      position: absolute;
      left: 0; top: 20%; height: 60%; width: 3px;
      border-radius: 0 3px 3px 0;
    }

    .stat-number {
      font-size: 44px;
      font-weight: 800;
      line-height: 1;
      letter-spacing: -2px;
    }
    .stat-label { font-size: 12px; color: var(--text-muted); margin-top: 6px; }

    /* â”€â”€â”€ Task List â”€â”€â”€ */
    .task-list {
      display: flex;
      flex-direction: column; /* Stack items vertically */
      gap: 9px;
      margin-bottom: 16px;
      animation: fadeSlideIn 0.3s ease 0.2s both;
    }

    .task-item {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 13px 15px;
      display: flex;
      align-items: center;
      gap: 13px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .task-item:hover { background: var(--surface3); border-color: rgba(240,106,0,0.3); }

    /* Circular checkbox on the left */
    .task-check {
      width: 22px; height: 22px;
      border-radius: 50%;
      border: 2px solid var(--border);
      flex-shrink: 0;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s ease;
    }
    .task-item.done .task-check { background: var(--orange); border-color: var(--orange); }

    /* Checkmark inside the circle using ::after pseudo-element */
    .task-item.done .task-check::after {
      content: 'âœ“';
      font-size: 11px;
      color: white;
      font-weight: 700;
    }

    .task-info { flex: 1; min-width: 0; } /* min-width:0 allows text-overflow:ellipsis to work */
    .task-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
      white-space: nowrap;      /* Don't wrap to new line */
      overflow: hidden;
      text-overflow: ellipsis;  /* Show "..." when text overflows */
      transition: color 0.2s;
    }
    .task-item.done .task-name { color: var(--text-muted); text-decoration: line-through; }
    .task-meta { font-size: 11px; color: var(--text-dim); margin-top: 2px; }

    /* Colored priority indicator dot */
    .priority-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }

    /* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       CALENDAR VIEW
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
    .calendar-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 0 18px;
    }
    .cal-title { font-size: 19px; font-weight: 700; letter-spacing: -0.4px; }

    .cal-nav-btn {
      width: 36px; height: 36px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: all 0.2s;
    }
    .cal-nav-btn:hover { background: var(--surface3); }
    .cal-nav-btn svg { width: 15px; height: 15px; color: var(--text-muted); }

    /* Day-of-week labels row (Su Mo Tu...) */
    .weekday-row {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
      margin-bottom: 8px;
    }
    .weekday-label { font-size: 11px; color: var(--text-muted); font-weight: 500; padding: 6px 0; }

    /* Calendar date cells */
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 3px;
      margin-bottom: 18px;
    }

    .cal-day {
      aspect-ratio: 1; /* Keep cells as perfect squares */
      display: flex; align-items: center; justify-content: center;
      font-size: 14px; font-weight: 500;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.15s;
      color: var(--text);
    }
    .cal-day:hover { background: var(--surface2); }
    .cal-day.other-month { color: var(--text-dim); }
    .cal-day.today {
      background: var(--orange);
      color: white;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(240,106,0,0.4);
    }
    .cal-day.selected:not(.today) {
      background: var(--surface3);
      color: var(--orange);
      font-weight: 700;
    }
    /* Task indicator dot on calendar days that have tasks */
    .cal-day.has-task { position: relative; }
    .cal-day.has-task:not(.today)::after {
      content: '';
      position: absolute;
      bottom: 3px;
      width: 4px; height: 4px;
      border-radius: 50%;
      background: var(--orange);
    }

    /* â”€â”€â”€ Timeline â”€â”€â”€ */
    .timeline-divider { text-align: center; margin: 4px 0 18px; }
    .timeline-divider span { display: inline-block; width: 40px; height: 4px; background: var(--border); border-radius: 2px; }

    .timeline { position: relative; padding-left: 54px; }

    /* Vertical line along the left side */
    .timeline::before {
      content: '';
      position: absolute;
      left: 44px; top: 0; bottom: 0; width: 1px;
      background: linear-gradient(to bottom, transparent, var(--border) 8%, var(--border) 92%, transparent);
    }

    .timeline-row { position: relative; margin-bottom: 6px; }

    .time-label {
      position: absolute;
      left: -54px; top: 0;
      font-size: 11px; color: var(--text-muted);
      width: 40px; text-align: right;
      padding-top: 14px;
    }

    .time-slot-empty { height: 34px; }

    .timeline-card {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 13px 15px 13px;
      margin-left: 14px;
      position: relative;
      transition: all 0.2s;
    }
    .timeline-card:hover { border-color: var(--orange); background: var(--surface3); }

    /* Orange dot on the timeline line */
    .timeline-card::before {
      content: '';
      position: absolute;
      left: -20px; top: 16px;
      width: 8px; height: 8px;
      border-radius: 50%;
      background: var(--orange);
      box-shadow: 0 0 8px rgba(240,106,0,0.55);
    }

    .tl-title { font-size: 16px; font-weight: 700; letter-spacing: -0.3px; margin-bottom: 3px; }
    .tl-desc  { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
    .tl-time  { font-size: 11px; color: var(--text-dim); }

    /* Link icon in bottom-right corner of timeline card */
    .tl-icon {
      position: absolute; bottom: 11px; right: 13px;
      width: 26px; height: 26px;
      background: var(--surface3);
      border-radius: var(--radius-sm);
      display: flex; align-items: center; justify-content: center;
    }
    .tl-icon svg { width: 13px; height: 13px; color: var(--text-muted); }

    /* Orange "current time" horizontal line */
    .current-time-row .time-label { color: var(--orange); font-weight: 600; }
    .current-time-line {
      height: 2px;
      background: linear-gradient(to right, var(--orange) 0%, transparent 100%);
      margin-left: 14px;
      border-radius: 1px;
      position: relative;
    }
    .current-time-line::before {
      content: '';
      position: absolute;
      left: -4px; top: -4px;
      width: 10px; height: 10px;
      border-radius: 50%;
      background: var(--orange);
      box-shadow: 0 0 10px rgba(240,106,0,0.75);
    }

    /* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
       ADD TASK MODAL
       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
    .modal-overlay {
      /*
        position:fixed = attached to the viewport (screen),
        not the page. So it stays in place even when scrolling.
        inset:0 = top:0 right:0 bottom:0 left:0 (covers everything)
      */
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.72);
      z-index: 200;
      display: flex;
      align-items: flex-end; /* Align panel at the BOTTOM */
      opacity: 0;
      pointer-events: none; /* Ignore clicks when hidden */
      transition: opacity 0.3s ease;
    }
    .modal-overlay.open {
      opacity: 1;
      pointer-events: all; /* Allow clicks when open */
    }

    .modal-panel {
      width: 100%;
      background: var(--surface);
      border-radius: 26px 26px 0 0;
      padding: 18px 20px 38px;
      transform: translateY(100%); /* Start: hidden below the screen */
      /* cubic-bezier: a spring-like easing â€” bounces slightly at the end */
      transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .modal-overlay.open .modal-panel {
      transform: translateY(0); /* End: normal position (slides up) */
    }

    .modal-handle { width: 40px; height: 4px; background: var(--border); border-radius: 2px; margin: 0 auto 20px; }
    .modal-title  { font-size: 20px; font-weight: 700; margin-bottom: 18px; letter-spacing: -0.4px; }

    .modal-input {
      width: 100%;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 14px 16px;
      color: var(--text);
      font-family: var(--font);
      font-size: 14px;
      margin-bottom: 11px;
      outline: none; /* Remove default browser blue outline */
      transition: border-color 0.2s;
    }
    .modal-input:focus { border-color: var(--orange); } /* Highlight when active */
    .modal-input::placeholder { color: var(--text-dim); }

    .priority-row { display: flex; gap: 8px; margin-bottom: 18px; }
    .priority-label { font-size: 13px; color: var(--text-muted); margin-bottom: 8px; font-weight: 500; }

    .priority-pill {
      flex: 1;
      padding: 10px 6px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      text-align: center;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.18s;
      color: var(--text-muted);
      font-family: var(--font);
    }
    .priority-pill.selected {
      border-color: var(--orange);
      color: var(--orange);
      background: var(--orange-glow);
    }

    .modal-btn {
      width: 100%;
      padding: 16px;
      background: var(--orange);
      border: none;
      border-radius: var(--radius-md);
      color: white;
      font-family: var(--font);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      letter-spacing: 0.3px;
      transition: all 0.2s ease;
    }
    .modal-btn:hover { background: #d85e00; transform: translateY(-1px); }
    .modal-btn:active { transform: translateY(0); }

  </style>
</head>

<body>

  <!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    HTML STRUCTURE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    HTML uses TAGS to create structure.
    Opening:  <div>     Closing:  </div>
    class=""  â†’ connects to CSS styling rules
    id=""     â†’ unique name for JavaScript to find the element
    onclick="" â†’ runs JavaScript when clicked
  -->

  <div class="phone-shell">

    <div class="notch"></div>

    <!-- Scrollable content inside the phone -->
    <div class="screen">

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIEW: HOME â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="view active" id="view-home">

        <!-- Header: dots + greeting + avatar -->
        <div class="home-header">
          <div>
            <div class="menu-dots"><span></span><span></span><span></span></div>
            <div style="margin-top:14px">
              <div class="greeting-sub">Hello,</div>
              <div class="greeting-name">Smith</div>
              <div class="greeting-sub2" id="pending-count">5 tasks are pending</div>
            </div>
          </div>
          <div class="avatar">ğŸ§‘â€ğŸ’»</div>
        </div>

        <!-- Active task card â€” always shows the most urgent in-progress task -->
        <div class="active-task-card">
          <div class="task-category-badge">
            <!-- Inline SVG play icon â€” SVG is scalable vector graphic, drawn with code -->
            <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5v14l11-7z"/>
            </svg>
            3D Modeling
          </div>
          <div class="task-title-large">Learn 3D modeling in cinema 4D</div>
          <div class="task-footer">
            <div class="task-progress">
              <div class="progress-label">In progress â€” 65%</div>
              <div class="progress-track">
                <div class="progress-fill" style="width:65%"></div>
              </div>
            </div>
            <div class="now-badge">Now</div>
          </div>
        </div>

        <!-- Monthly Review section -->
        <div class="section-header">
          <div class="section-title">Monthly Review</div>
          <div class="icon-btn">
            <!-- Calendar SVG icon (built with lines and rectangles) -->
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8"  y1="2" x2="8"  y2="6"/>
              <line x1="3"  y1="10" x2="21" y2="10"/>
            </svg>
          </div>
        </div>

        <!-- 4 stat cards in a 2Ã—2 grid -->
        <div class="stats-grid">
          <div class="stat-card" onclick="animateStat('done')">
            <div class="stat-bar" style="background:#4ecba3"></div>
            <div class="stat-number" id="stat-done" style="color:#4ecba3">0</div>
            <div class="stat-label">Done</div>
          </div>
          <div class="stat-card" onclick="animateStat('progress')">
            <div class="stat-bar" style="background:#ffb547"></div>
            <div class="stat-number" id="stat-progress" style="color:#ffb547">0</div>
            <div class="stat-label">In progress</div>
          </div>
          <div class="stat-card" onclick="animateStat('ongoing')">
            <div class="stat-bar" style="background:#f06a00"></div>
            <div class="stat-number" id="stat-ongoing" style="color:#f06a00">0</div>
            <div class="stat-label">Ongoing</div>
          </div>
          <div class="stat-card" onclick="animateStat('waiting')">
            <div class="stat-bar" style="background:#b085ff"></div>
            <div class="stat-number" id="stat-waiting" style="color:#b085ff">0</div>
            <div class="stat-label">Waiting for review</div>
          </div>
        </div>

        <!-- Today's task list -->
        <div class="section-header">
          <div class="section-title">Today's Tasks</div>
          <!-- onclick calls the openModal() JavaScript function when clicked -->
          <span class="section-link" onclick="openModal()">+ Add Task</span>
        </div>
        <!--
          This empty div is a CONTAINER.
          JavaScript will inject task HTML elements inside it.
        -->
        <div class="task-list" id="task-list"></div>

      </div><!-- /view-home -->

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• VIEW: CALENDAR â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="view" id="view-calendar">

        <!-- Month navigation header -->
        <div class="calendar-header">
          <button class="cal-nav-btn" onclick="changeMonth(-1)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <polyline points="15 18 9 12 15 6"/>
            </svg>
          </button>
          <div class="cal-title" id="cal-month-label">Loading...</div>
          <button class="cal-nav-btn" onclick="changeMonth(1)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </button>
        </div>

        <!-- Day-of-week labels: fixed, never change -->
        <div class="weekday-row">
          <div class="weekday-label">Su</div>
          <div class="weekday-label">Mo</div>
          <div class="weekday-label">Tu</div>
          <div class="weekday-label">We</div>
          <div class="weekday-label">Th</div>
          <div class="weekday-label">Fr</div>
          <div class="weekday-label">Sa</div>
        </div>

        <!-- Calendar date cells â€” generated by JavaScript -->
        <div class="calendar-grid" id="cal-grid"></div>

        <!-- Divider between calendar and timeline -->
        <div class="timeline-divider"><span></span></div>

        <!-- Timeline of tasks for selected day â€” generated by JavaScript -->
        <div class="timeline" id="timeline"></div>

      </div><!-- /view-calendar -->

    </div><!-- /screen -->

    <!-- Bottom navigation bar -->
    <div class="bottom-nav">
      <button class="nav-btn active" id="nav-home" onclick="switchView('home')">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
        <div class="nav-dot"></div>
        <span>Home</span>
      </button>

      <button class="fab" onclick="openModal()">
        <!-- Plus icon SVG: two perpendicular lines -->
        <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5"  y1="12" x2="19" y2="12"/>
        </svg>
      </button>

      <button class="nav-btn" id="nav-calendar" onclick="switchView('calendar')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8"  y1="2" x2="8"  y2="6"/>
          <line x1="3"  y1="10" x2="21" y2="10"/>
        </svg>
        <div class="nav-dot"></div>
        <span>Calendar</span>
      </button>
    </div>

  </div><!-- /phone-shell -->

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• ADD TASK MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!--
    This overlay is hidden initially (no .open class).
    JS toggles the .open class to show/hide it.
    Clicking the dark overlay (not the panel) closes it.
  -->
  <div class="modal-overlay" id="modal" onclick="handleOverlayClick(event)">
    <div class="modal-panel">
      <div class="modal-handle"></div>
      <div class="modal-title">New Task âœ¦</div>

      <input class="modal-input" id="input-name" type="text" placeholder="What needs to be done?" maxlength="60" />
      <input class="modal-input" id="input-time" type="text" placeholder="Time (e.g. 10:00 - 11:00)" />

      <div class="priority-label">Priority</div>
      <div class="priority-row">
        <!-- Each pill calls selectPriority() with a different value -->
        <div class="priority-pill" onclick="selectPriority(this,'high')">ğŸ”´ High</div>
        <div class="priority-pill selected" onclick="selectPriority(this,'medium')">ğŸŸ  Medium</div>
        <div class="priority-pill" onclick="selectPriority(this,'low')">ğŸŸ¢ Low</div>
      </div>

      <button class="modal-btn" onclick="addTask()">Add Task</button>
    </div>
  </div>

  <!--
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    JAVASCRIPT â€” Behavior & Interactivity
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    HTML = What's on the page (structure)
    CSS  = How it looks (style)
    JS   = What it does (behavior)
  -->
  <script>

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 1. DATA â€” Our task "database" (stored in memory)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    /*
      "let" declares a variable that can be changed later.
      "const" declares a variable that cannot be reassigned.
      An ARRAY [] holds a list of items.
      An OBJECT {} holds key:value pairs (properties).
    */
    let tasks = [
      { id:1, name:'Design Concept',                   time:'10:00â€“11:00', priority:'high',   done:false, category:'Design'        },
      { id:2, name:'Learn 3D modeling in cinema 4D',   time:'12:00â€“14:00', priority:'medium', done:false, category:'3D Modeling'   },
      { id:3, name:'Monthly Review Meeting',            time:'15:00â€“16:00', priority:'high',   done:false, category:'Meetings'      },
      { id:4, name:'Update project documentation',      time:'09:00â€“10:00', priority:'low',    done:true,  category:'Writing'       },
      { id:5, name:'Respond to client emails',          time:'08:30â€“09:00', priority:'medium', done:true,  category:'Comms'         },
    ];

    let nextId = 6;              // Counter for generating unique IDs
    let selectedPriority = 'medium'; // Tracks which priority is chosen in modal

    // Calendar state
    let calYear  = new Date().getFullYear();
    let calMonth = new Date().getMonth();  // 0=Jan â€¦ 11=Dec
    let selectedDay = new Date().getDate();

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 2. HELPERS â€” Small reusable utility functions
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    /*
      A FUNCTION is a named block of code you can run anytime.
      Syntax:
        function name(parameters) {
          codeâ€¦
          return value;
        }
    */

    // Returns a color string for a given priority level
    function priorityColor(p) {
      if (p === 'high')   return '#ff5e5e';
      if (p === 'medium') return '#ffb547';
      if (p === 'low')    return '#4ecba3';
      return '#7a6a58';
    }

    // Counts tasks that are not yet done
    function pendingCount() {
      // .filter() creates a new array keeping only items that pass the test
      // Arrow function: t => !t.done means "keep if NOT done"
      return tasks.filter(t => !t.done).length; // .length = number of items
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 3. RENDER FUNCTIONS â€” Draw data onto the screen
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function renderTasks() {
      // document.getElementById('id') finds an HTML element by its id
      const listEl = document.getElementById('task-list');
      const count  = pendingCount();

      // Update the "X tasks are pending" text
      // .textContent sets the text inside an element
      document.getElementById('pending-count').textContent =
        count + (count === 1 ? ' task is' : ' tasks are') + ' pending';

      // Empty state
      if (tasks.length === 0) {
        listEl.innerHTML = '<div style="text-align:center;padding:30px;color:var(--text-muted);font-size:13px;">No tasks yet. Tap + to add one! ğŸ¯</div>';
        return; // Exit the function early with "return"
      }

      /*
        .map() transforms each array item into something new.
        Here each task OBJECT â†’ HTML STRING.
        Template literals use backticks ` ` and ${} to embed values.
        .join('') merges all strings into one.
      */
      listEl.innerHTML = tasks.map(task => `
        <div class="task-item ${task.done ? 'done' : ''}" onclick="toggleTask(${task.id})">
          <div class="task-check"></div>
          <div class="task-info">
            <div class="task-name">${task.name}</div>
            <div class="task-meta">${task.time} Â· ${task.category}</div>
          </div>
          <div class="priority-dot" style="background:${priorityColor(task.priority)}"></div>
        </div>
      `).join('');

      // Update stat numbers
      const done     = tasks.filter(t =>  t.done).length;
      const high     = tasks.filter(t => !t.done && t.priority === 'high').length;
      const medium   = tasks.filter(t => !t.done && t.priority === 'medium').length;
      const low      = tasks.filter(t => !t.done && t.priority === 'low').length;

      document.getElementById('stat-done').textContent     = done;
      document.getElementById('stat-progress').textContent = high;
      document.getElementById('stat-ongoing').textContent  = medium;
      document.getElementById('stat-waiting').textContent  = low;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 4. TASK ACTIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // Toggle a task's done/undone state when the user taps it
    function toggleTask(id) {
      // .find() returns the FIRST item that matches the test
      const task = tasks.find(t => t.id === id);
      if (task) {
        task.done = !task.done; // ! flips trueâ†’false and falseâ†’true
        renderTasks();          // Redraw the list to show the change
      }
    }

    // Bounce animation on a stat card when clicked
    function animateStat(key) {
      const el = document.getElementById('stat-' + key);
      if (!el) return;
      el.style.transform = 'scale(1.07)';
      // setTimeout runs code after a delay. 1000ms = 1 second.
      setTimeout(() => { el.style.transform = ''; }, 180);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 5. MODAL (Add Task Popup)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function openModal() {
      // .classList.add() adds a CSS class to an element
      document.getElementById('modal').classList.add('open');
      setTimeout(() => document.getElementById('input-name').focus(), 380);
    }

    function closeModal() {
      // .classList.remove() removes a CSS class
      document.getElementById('modal').classList.remove('open');
    }

    // Closes modal only when clicking the dark overlay (not the panel itself)
    function handleOverlayClick(e) {
      // e.target = the exact element that was clicked
      if (e.target === document.getElementById('modal')) closeModal();
    }

    function selectPriority(el, value) {
      selectedPriority = value;
      // querySelectorAll returns ALL matching elements as a list
      document.querySelectorAll('.priority-pill').forEach(p => p.classList.remove('selected'));
      el.classList.add('selected');
    }

    function addTask() {
      // .value reads the current text in an input field
      // .trim() removes whitespace from both ends
      const name = document.getElementById('input-name').value.trim();
      const time = document.getElementById('input-time').value.trim() || 'No time set';

      if (!name) {
        // Flash the border red if name is empty (validation)
        const inp = document.getElementById('input-name');
        inp.style.borderColor = '#ff5e5e';
        setTimeout(() => inp.style.borderColor = '', 1200);
        return; // Stop â€” don't add an empty task
      }

      // Build a new task object and push it onto the array
      tasks.push({ id: nextId++, name, time, priority: selectedPriority, done: false, category: 'Personal' });
      // nextId++ uses the current value, THEN increments it by 1

      // Reset the form
      document.getElementById('input-name').value = '';
      document.getElementById('input-time').value = '';
      selectPriority(document.querySelectorAll('.priority-pill')[1], 'medium');

      closeModal();
      renderTasks();
      buildTimeline(selectedDay); // Also update the timeline
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 6. VIEW SWITCHING
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function switchView(name) {
      // Hide all views, show only the requested one
      document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
      document.getElementById('view-' + name).classList.add('active');

      // Update nav button highlights
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      document.getElementById('nav-' + name).classList.add('active');

      // If switching to Calendar, build it
      if (name === 'calendar') { buildCalendar(); buildTimeline(selectedDay); }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 7. CALENDAR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    const MONTHS = ['January','February','March','April','May','June',
                    'July','August','September','October','November','December'];

    function changeMonth(dir) {
      calMonth += dir;
      // Handle year rollover: month goes below 0 or above 11
      if (calMonth > 11) { calMonth = 0;  calYear++; }
      if (calMonth < 0)  { calMonth = 11; calYear--; }
      buildCalendar();
      buildTimeline(selectedDay);
    }

    function buildCalendar() {
      document.getElementById('cal-month-label').textContent = MONTHS[calMonth] + ' ' + calYear;

      const today = new Date();

      // JavaScript Date math to find the first day of the month
      // new Date(year, month, day) â€” month is 0-indexed
      const firstDay    = new Date(calYear, calMonth, 1).getDay();   // 0=Sunâ€¦6=Sat
      const daysInMonth = new Date(calYear, calMonth + 1, 0).getDate(); // Last day
      const daysInPrev  = new Date(calYear, calMonth, 0).getDate();

      let html = '';

      // Cells BEFORE the 1st (from previous month)
      for (let i = firstDay - 1; i >= 0; i--) {
        html += `<div class="cal-day other-month">${daysInPrev - i}</div>`;
      }

      // Cells FOR this month
      for (let d = 1; d <= daysInMonth; d++) {
        const isToday   = d === today.getDate() && calMonth === today.getMonth() && calYear === today.getFullYear();
        const isSelected = d === selectedDay && !isToday;
        // .some() checks if AT LEAST ONE item matches â€” returns true/false
        const hasTask   = tasks.some(t => { const h = parseInt(t.time); return (d + h) % 4 === 0; });
        const cls = ['cal-day', isToday ? 'today' : '', isSelected ? 'selected' : '', hasTask ? 'has-task' : ''].filter(Boolean).join(' ');
        html += `<div class="${cls}" onclick="selectDay(${d})">${d}</div>`;
      }

      // Trailing cells (from next month)
      const total = firstDay + daysInMonth;
      for (let i = 1; i <= (7 - total % 7) % 7; i++) {
        html += `<div class="cal-day other-month">${i}</div>`;
      }

      document.getElementById('cal-grid').innerHTML = html;
    }

    function selectDay(d) {
      selectedDay = d;
      buildCalendar();
      buildTimeline(d);
    }

    function buildTimeline(day) {
      const tl = document.getElementById('timeline');
      if (!tl) return;

      const now = new Date();
      const curHour = now.getHours();
      const isToday = day === now.getDate() && calMonth === now.getMonth() && calYear === now.getFullYear();
      const hours = [8,9,10,11,12,13,14,15,16,17,18];

      let html = '';

      hours.forEach(h => {
        const label = h + ':00';
        // Find a task whose start hour matches
        const task = tasks.find(t => parseInt(t.time) === h);
        const isCurrent = isToday && h === curHour;

        if (isCurrent) {
          html += `
            <div class="timeline-row current-time-row">
              <div class="time-label">${label}</div>
              <div class="current-time-line"></div>
            </div>`;
        } else if (task) {
          html += `
            <div class="timeline-row">
              <div class="time-label">${label}</div>
              <div class="timeline-card">
                <div class="tl-title">${task.name}</div>
                <div class="tl-desc">${task.category}</div>
                <div class="tl-time">${task.time}</div>
                <div class="tl-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/>
                    <path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/>
                  </svg>
                </div>
              </div>
            </div>`;
        } else {
          html += `<div class="timeline-row"><div class="time-label">${label}</div><div class="time-slot-empty"></div></div>`;
        }
      });

      tl.innerHTML = html;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 8. KEYBOARD SHORTCUTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    /*
      document.addEventListener(eventName, callbackFunction)
      Listens for an event on the whole page.
      'keydown' fires every time any key is pressed.
      The event object (e) tells us WHICH key was pressed.
    */
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') closeModal();
      // .contains() checks if an element has a specific class
      if (e.key === 'Enter' && document.getElementById('modal').classList.contains('open')) addTask();
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 9. INITIALIZATION â€” Runs immediately on page load
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    renderTasks();                    // Draw task list
    buildCalendar();                  // Build the calendar grid
    buildTimeline(selectedDay);       // Build today's timeline

    /*
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      SUMMARY: What happens at each interaction:

      Click "+" FAB        â†’ openModal()   â†’ panel slides up
      Fill form â†’ Add Task â†’ addTask()     â†’ task added, modal closes
      Tap a task row       â†’ toggleTask()  â†’ done flips, UI redraws
      Tap "Calendar" nav   â†’ switchView()  â†’ calendar appears
      Tap a date           â†’ selectDay()   â†’ timeline rebuilds
      Tap month arrows     â†’ changeMonth() â†’ calendar rebuilds
      Press Escape         â†’ closeModal()  â†’ modal closes
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    */

  </script>
</body>
</html>
